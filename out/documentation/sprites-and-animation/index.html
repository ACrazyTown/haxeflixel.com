<!DOCTYPE html>
<html lang="en">

<head>

	<meta charset="utf-8"/>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>

	<title>4 - Sprites and Animation | HaxeFlixel 2D Game Engine</title>

	<meta name="description" content="HaxeFlixel is a 2D Game Engine that lets you create cross-platform games easier with free, open source technology!"/>
	<meta name="keywords" content="gamedev, game development, cross-platform, haxe, flixel"/>
	<meta name="author" content=""/>
	<meta name="viewport" content="width=device-width"/>

	<link rel="shortcut icon" href="/images/favicon.ico">

	<!--[if lt IE 9]>
	<script async src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<link  rel="stylesheet" href="/styles/style.css" />

</head>


<body>

<header>
	<nav>

		<div class="navbar navbar-inverse navbar-fixed-top">
			<div class="container">

				<div class="navbar-header">
					<button data-target=".navbar-collapse" data-toggle="collapse" class="navbar-toggle" type="button">
						<span class="icon-bar" />
						<span class="icon-bar" />
						<span class="icon-bar" />
					</button>
					<a href="/" class="navbar-brand"><img src="/images/haxeflixel-header.png" alt="HaxeFlixel" /></a>
				</div>

				<div class="navbar-collapse collapse">

					<ul class="nav navbar-nav">

						<li >
							<a href="/demos">Demos</a>
						</li>

						<li >
							<a href="/showcase">Showcase</a>
						</li>

						<li >
							<a href="/blog">Blog</a>
						</li>

						<li class='active'>
							<a href="/documentation">Docs</a>
						</li>

						<li>
							<a href="http://api.haxeflixel.com">API</a>
						</li>

						<li >
							<a href="/forum">Forum</a>
						</li>

					</ul>
		
					<form class="navbar-form search-form" role="search" action="http://google.com/search" method="get">
    <div class="form-group">
        <input type="search" name="q" class="form-control" placeholder="Search">
        <input type="hidden" name="q" value="site:http://haxeflixel.com">
    </div>
</form>

				</div>

			</div>

		</div>

	</nav>
</header>

<div class="container container-main">
	<div class="row">

		<div class="col-md-3">
			<div class="doc-nav affix">
				<ul class="nav">



	<li>
		<h4><a href="/documentation/getting-started">Getting Started</a><h4>
	</li>

	



	<li>
		<h4><a href="/documentation/tutorial">Tutorial</a><h4>
	</li>

	
		
			<li class= about="/documentation/tutorial">
				<a href="/documentation/tutorial"> Tutorial </a>
			</li>
		
			<li class= about="/documentation/the-power-of-haxeflixel">
				<a href="/documentation/the-power-of-haxeflixel"> The Power of HaxeFlixel </a>
			</li>
		
			<li class= about="/documentation/setup">
				<a href="/documentation/setup"> 1 - Setup </a>
			</li>
		
			<li class= about="/documentation/creating-a-new-project">
				<a href="/documentation/creating-a-new-project"> 2 - Creating a new project </a>
			</li>
		
			<li class= about="/documentation/groundwork">
				<a href="/documentation/groundwork"> 3 - Groundwork </a>
			</li>
		
			<li class=active about="/documentation/sprites-and-animation">
				<a href="/documentation/sprites-and-animation"> 4 - Sprites and Animation </a>
			</li>
		
			<li class= about="/documentation/creating-a-tilemap">
				<a href="/documentation/creating-a-tilemap"> 5 - Creating a Tilemap </a>
			</li>
		
			<li class= about="/documentation/loading-the-tilemap">
				<a href="/documentation/loading-the-tilemap"> 6 - Loading the Tilemap </a>
			</li>
		
			<li class= about="/documentation/zoom-and-cameras">
				<a href="/documentation/zoom-and-cameras"> 7 - Zoom and Cameras </a>
			</li>
		
			<li class= about="/documentation/pickups">
				<a href="/documentation/pickups"> 8 - Pickups </a>
			</li>
		
			<li class= about="/documentation/enemies-and-basic-ai">
				<a href="/documentation/enemies-and-basic-ai"> 9 - Enemies and Basic AI </a>
			</li>
		
			<li class= about="/documentation/ui-and-combat">
				<a href="/documentation/ui-and-combat"> 10 - UI and Combat </a>
			</li>
		
			<li class= about="/documentation/game-over-menu">
				<a href="/documentation/game-over-menu"> 11 - Game Over Menu </a>
			</li>
		
			<li class= about="/documentation/sound-and-music">
				<a href="/documentation/sound-and-music"> 12 - Sound and Music </a>
			</li>
		
			<li class= about="/documentation/multiple-platforms">
				<a href="/documentation/multiple-platforms"> 13 - Multiple Platforms </a>
			</li>
		
			<li class= about="/documentation/polish">
				<a href="/documentation/polish"> 14 - Polish </a>
			</li>
		
			<li class= about="/documentation/conclusion">
				<a href="/documentation/conclusion"> Conclusion </a>
			</li>
		
	



	<li>
		<h4><a href="/documentation/haxeflixel-handbook">HaxeFlixel Handbook</a><h4>
	</li>

	



	<li>
		<h4><a href="/documentation/resources">Resources</a><h4>
	</li>

	



	<li>
		<h4><a href="/documentation/community">Community</a><h4>
	</li>

	



</ul>
			</div>
		</div>

		<div class="col-md-9 doc-content" role="main">
			<h1 class="title">4 - Sprites and Animation</h1>

			
			<a href="https://github.com/HaxeFlixel/flixel-docs/blob/master/documentation/01_tutorial/05-4-sprites-and-animation.html.md" class="btn btn-sm btn-edit" target="_blank"><span class="glyphicon glyphicon-pencil"></span> Edit </a>

			<p>So we have a player sprite that moves around the screen. Great! But… we don&#39;t want it to just look like a block… so let&#39;s add some graphics!</p>
<p>First, you need to have the sprite&#39;s graphic. Using your image editor of choice, you can draw pretty much anything you want, and save it as a transparent <code>.png</code>. For our player sprite, we&#39;re going to have it be made up of 16x16 pixel frames, with two different frames for each of the 4-possible facing directions (left and right are used by the same 2 frames, since we will be flipping them later).</p>
<p>You can draw it yourself, if you want, or use this image, created by my friend Vicky Hedgecock for this tutorial:</p>
<p><img src="https://raw.githubusercontent.com/HaxeFlixel/flixel-demos/master/Tutorials/TurnBasedRPG/assets/images/player.png" alt=""></p>
<p>Save your file in <code>assets/images</code>.</p>
<p>Now we need to actually load the player&#39;s graphic into the sprite. So, bring up your <code>Player</code> class again.</p>
<ol>
<li><p>Remove the <code>makeGraphic()</code> call from your constructor, and replace it with:</p>
<pre class="highlight"><code class="actionscript"> loadGraphic(AssetPaths.player__png, <span class="literal">true</span>, <span class="number">16</span>, <span class="number">16</span>);</code></pre>
<p> This tells your sprite to use the <code>player.png</code> graphic, that it&#39;s animated, and that each frame is 16x16 pixels. <code>AssetPaths</code> is a class generated by a neat <a href="http://haxe.org/manual/macros">Haxe macro</a> which builds its variables from the contents of your <code>Project.xml</code>&#39;s assets tag. Macros are a little complicated, but worth taking a look into at some point. In this case, we use <code>AssetsPaths</code> as an easy way to reference our assets in code.</p>
</li>
<li><p>Next, we want to allow the sprite to be flipped based on its <code>facing</code> value. This makes it so we only need sprites for one direction (left), and not two (left and right).</p>
<p> Add the following:</p>
<pre class="highlight"><code class="actionscript"> setFacingFlip(FlxObject.LEFT, <span class="literal">false</span>, <span class="literal">false</span>);
 setFacingFlip(FlxObject.RIGHT, <span class="literal">true</span>, <span class="literal">false</span>);</code></pre>
<p> All we&#39;re doing here is saying that we don&#39;t want to flip anything when facing left (because our sprite already faces left), and to flip horizontally when facing right. We could do the same for up and down if we wanted.</p>
</li>
<li><p>Now, we need to define our animations. In our case, we want each animation to end with the player in their &#39;neutral&#39; pose (legs together), that way each time we animate the player, it will return to the correct frame as soon as they stop animating. So, add:</p>
<pre class="highlight"><code class="actionscript"> animation.add(<span class="string">"lr"</span>, [<span class="number">3</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">5</span>], <span class="number">6</span>, <span class="literal">false</span>);
 animation.add(<span class="string">"u"</span>, [<span class="number">6</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">8</span>], <span class="number">6</span>, <span class="literal">false</span>);
 animation.add(<span class="string">"d"</span>, [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>], <span class="number">6</span>, <span class="literal">false</span>);</code></pre>
<p> We&#39;re finished with the constructor changes, the final step is to change our <code>movement()</code> function to tell the player sprite which way to face. So, modify our section which deals with setting the player&#39;s angle to look something like this:</p>
<pre class="highlight"><code class="actionscript"> <span class="keyword">var</span> mA:Float = <span class="number">0</span>; <span class="comment">// our temporary angle</span>
 <span class="keyword">if</span> (_up)  <span class="comment">// the player is pressing UP</span>
 {
     mA = -<span class="number">90</span>; <span class="comment">// set our angle to -90 (12 o'clock)</span>
     <span class="keyword">if</span> (_left)
         mA -= <span class="number">45</span>; <span class="comment">// if the player is also pressing LEFT, subtract 45 degrees from our angle - we're moving up and left</span>
     <span class="keyword">else</span> <span class="keyword">if</span> (_right)
         mA += <span class="number">45</span>; <span class="comment">// similarly, if the player is pressing RIGHT, add 45 degrees (up and right)</span>
     facing = FlxObject.UP; <span class="comment">// the sprite should be facing UP</span>
 }
 <span class="keyword">else</span> <span class="keyword">if</span> (_down) <span class="comment">// the player is pressing DOWN</span>
 {
     mA = <span class="number">90</span>; <span class="comment">// set our angle to 90 (6 o'clock)</span>
     <span class="keyword">if</span> (_left)
         mA += <span class="number">45</span>; <span class="comment">// add 45 degrees if the player is also pressing LEFT</span>
     <span class="keyword">else</span> <span class="keyword">if</span> (_right)
         mA -= <span class="number">45</span>; <span class="comment">// or subtract 45 if they are pressing RIGHT</span>
     facing = FlxObject.DOWN; <span class="comment">// the sprite is facing DOWN</span>
 }
 <span class="keyword">else</span> <span class="keyword">if</span> (_left) <span class="comment">// if the player is not pressing UP or DOWN, but they are pressing LEFT</span>
 {
     mA = <span class="number">180</span>; <span class="comment">// set our angle to 180 (9 o'clock)</span>
     facing = FlxObject.LEFT; <span class="comment">// the sprite should be facing LEFT</span>
 }
 <span class="keyword">else</span> <span class="keyword">if</span> (_right) <span class="comment">// the player is not pressing UP, DOWN, or LEFT, and they ARE pressing RIGHT</span>
 {
     mA = <span class="number">0</span>; <span class="comment">// set our angle to 0 (3 o'clock)</span>
     facing = FlxObject.RIGHT; <span class="comment">// set the sprite's facing to RIGHT</span>
 }
 <span class="comment">// determine our velocity based on angle and speed</span>
 velocity.<span class="keyword">set</span>(speed, <span class="number">0</span>);
 velocity.rotate(FlxPoint.weak(<span class="number">0</span>, <span class="number">0</span>), mA);

 <span class="keyword">if</span> ((velocity.x != <span class="number">0</span> || velocity.y != <span class="number">0</span>) &amp;&amp; touching == FlxObject.NONE) <span class="comment">// if the player is moving (velocity is not 0 for either axis), we need to change the animation to match their facing</span>
 {
     <span class="keyword">switch</span> (facing)
     {
         <span class="keyword">case</span> FlxObject.LEFT, FlxObject.RIGHT:
             animation.play(<span class="string">"lr"</span>);
         <span class="keyword">case</span> FlxObject.UP:
             animation.play(<span class="string">"u"</span>);
         <span class="keyword">case</span> FlxObject.DOWN:
             animation.play(<span class="string">"d"</span>);
     }
 }</code></pre>
<p> Every time this function gets called, it will check to see which of the directions the player is pressing, and, based on those, which way the sprite should be facing, and which animation should be playing..</p>
</li>
<li><p>Save your changes and run your project, and you should see your player sprite animate while being moved, and facing the right direction!</p>
<p> <img src="../images/01_tutorial/0006b.png" alt=""></p>
</li>
</ol>
<p>Next, we&#39;ll talk about maps and collision!</p>


			<br>
			<hr>

			<ul class="pager">
				

				<li class="previous">
					<a href="/documentation/groundwork">< 3 - Groundwork</a>
				</li>
				


				
				<li class="next">
					<a href="/documentation/creating-a-tilemap">5 - Creating a Tilemap ></a>
				</li>
				
			</ul>


		</div>
	</div>
</div>

<footer>
	<div class="footer-main">
		<div class=" container">

			<div class="footer-social">

				<iframe width="120px" scrolling="0" height="20px" frameborder="0"
						allowtransparency="true"
						src="http://ghbtns.com/github-btn.html?user=HaxeFlixel&amp;repo=flixel&amp;type=watch&amp;count=true&amp;size=small"></iframe>

				<a href="https://twitter.com/haxeflixel" class="twitter-follow-button" data-show-count="true"
				   data-lang="en" data-size="small">Follow @haxeflixel</a>

				<script>!function (d, s, id)
				{
					var js, fjs = d.getElementsByTagName (s)[0];
					if (!d.getElementById (id))
					{
						js = d.createElement (s);
						js.id = id;
						js.src = "//platform.twitter.com/widgets.js";
						fjs.parentNode.insertBefore (js, fjs);
					}
				} (document, "script", "twitter-wjs");</script>

			</div>

			<div class="footer-powered-by">
				<p>HaxeFlixel is powered by</p>
				<a href="http://haxe.org"><img src="/images/haxe.svg" alt="Haxe" title="Haxe"></a>
				+
				<a href="http://openfl.org"><img class="openfl-footer-logo" src="/images/openfl.svg" alt="OpenFL" title="OpenFL"></a>
				+
				<a href="http://flixel.org"><img class="flixel-footer-logo" src="/images/flixel.svg" alt="Flixel" title="Flixel"></a>
			</div>

		</div>
	</div>
</footer>

<script >(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-35511281-1');
ga('send', 'pageview');</script><script defer="defer"  src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script><script defer="defer"  src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script><script defer="defer"  src="/vendor/twitter-bootstrap-3/js/dropdown.js"></script><script defer="defer"  src="/vendor/twitter-bootstrap-3/js/transition.js"></script><script defer="defer"  src="/vendor/twitter-bootstrap-3/js/collapse.js"></script>

</body>

</html>
