<!DOCTYPE html>
<html lang="en">

<head>

	<meta charset="utf-8"/>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>

	<title>14 - Polish | HaxeFlixel 2D Game Engine</title>

	<meta name="description" content="HaxeFlixel is a 2D Game Engine that lets you create cross-platform games easier with free, open source technology!"/>
	<meta name="keywords" content="gamedev, game development, cross-platform, haxe, flixel"/>
	<meta name="author" content=""/>
	<meta name="viewport" content="width=device-width"/>

	<link rel="shortcut icon" href="/images/favicon.ico">

	<!--[if lt IE 9]>
	<script async src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<link  rel="stylesheet" href="/styles/style.css" />

</head>


<body>

<header>
	<nav>

		<div class="navbar navbar-inverse navbar-fixed-top">
			<div class="container">

				<div class="navbar-header">
					<button data-target=".navbar-collapse" data-toggle="collapse" class="navbar-toggle" type="button">
						<span class="icon-bar" />
						<span class="icon-bar" />
						<span class="icon-bar" />
					</button>
					<a href="/" class="navbar-brand"><img src="/images/haxeflixel-header.png" alt="HaxeFlixel" /></a>
				</div>

				<div class="navbar-collapse collapse">

					<ul class="nav navbar-nav">

						<li >
							<a href="/demos">Demos</a>
						</li>

						<li >
							<a href="/showcase">Showcase</a>
						</li>

						<li >
							<a href="/blog">Blog</a>
						</li>

						<li class='active'>
							<a href="/documentation">Docs</a>
						</li>

						<li>
							<a href="http://api.haxeflixel.com">API</a>
						</li>

						<li >
							<a href="http://forum.haxeflixel.com/">Forum</a>
						</li>

					</ul>
		
					<form class="navbar-form search-form" role="search" action="http://google.com/search" method="get">
    <div class="form-group">
        <input type="search" name="q" class="form-control" placeholder="Search">
        <input type="hidden" name="q" value="site:http://haxeflixel.com">
    </div>
</form>

				</div>

			</div>

		</div>

	</nav>
</header>

<div class="container container-main">
	<div class="row">

		<div class="col-md-3">
			<div class="doc-nav affix">
				<ul class="nav">



	<li>
		<h4><a href="/documentation/getting-started">Getting Started</a><h4>
	</li>

	



	<li>
		<h4><a href="/documentation/tutorial">Tutorial</a><h4>
	</li>

	
		
			<li class= about="/documentation/tutorial">
				<a href="/documentation/tutorial"> Tutorial </a>
			</li>
		
			<li class= about="/documentation/the-power-of-haxeflixel">
				<a href="/documentation/the-power-of-haxeflixel"> The Power of HaxeFlixel </a>
			</li>
		
			<li class= about="/documentation/setup">
				<a href="/documentation/setup"> 1 - Setup </a>
			</li>
		
			<li class= about="/documentation/creating-a-new-project">
				<a href="/documentation/creating-a-new-project"> 2 - Creating a new project </a>
			</li>
		
			<li class= about="/documentation/groundwork">
				<a href="/documentation/groundwork"> 3 - Groundwork </a>
			</li>
		
			<li class= about="/documentation/sprites-and-animation">
				<a href="/documentation/sprites-and-animation"> 4 - Sprites and Animation </a>
			</li>
		
			<li class= about="/documentation/creating-a-tilemap">
				<a href="/documentation/creating-a-tilemap"> 5 - Creating a Tilemap </a>
			</li>
		
			<li class= about="/documentation/loading-the-tilemap">
				<a href="/documentation/loading-the-tilemap"> 6 - Loading the Tilemap </a>
			</li>
		
			<li class= about="/documentation/zoom-and-cameras">
				<a href="/documentation/zoom-and-cameras"> 7 - Zoom and Cameras </a>
			</li>
		
			<li class= about="/documentation/pickups">
				<a href="/documentation/pickups"> 8 - Pickups </a>
			</li>
		
			<li class= about="/documentation/enemies-and-basic-ai">
				<a href="/documentation/enemies-and-basic-ai"> 9 - Enemies and Basic AI </a>
			</li>
		
			<li class= about="/documentation/ui-and-combat">
				<a href="/documentation/ui-and-combat"> 10 - UI and Combat </a>
			</li>
		
			<li class= about="/documentation/game-over-menu">
				<a href="/documentation/game-over-menu"> 11 - Game Over Menu </a>
			</li>
		
			<li class= about="/documentation/sound-and-music">
				<a href="/documentation/sound-and-music"> 12 - Sound and Music </a>
			</li>
		
			<li class= about="/documentation/multiple-platforms">
				<a href="/documentation/multiple-platforms"> 13 - Multiple Platforms </a>
			</li>
		
			<li class=active about="/documentation/polish">
				<a href="/documentation/polish"> 14 - Polish </a>
			</li>
		
			<li class= about="/documentation/conclusion">
				<a href="/documentation/conclusion"> Conclusion </a>
			</li>
		
	



	<li>
		<h4><a href="/documentation/haxeflixel-handbook">HaxeFlixel Handbook</a><h4>
	</li>

	



	<li>
		<h4><a href="/documentation/resources">Resources</a><h4>
	</li>

	



	<li>
		<h4><a href="/documentation/community">Community</a><h4>
	</li>

	



</ul>
			</div>
		</div>

		<div class="col-md-9 doc-content" role="main">
			<h1 class="title">14 - Polish</h1>

			
			<a href="https://github.com/HaxeFlixel/flixel-docs/blob/master/documentation/01_tutorial/15-14-polish.html.md" class="btn btn-sm btn-edit" target="_blank"><span class="glyphicon glyphicon-pencil"></span> Edit </a>

			<p>In this section, you&#39;re going to learn a few simple tricks to add some polish and juice to your game. Some of those have already been added here and there, but we&#39;ll go through a few places now to talk about them.</p>
<p>First up, there&#39;s a simple effect we can do with our camera to have it fade in or out. This works nice for transitions between states or screens.
We can add it to each of our states&#39; <code>create()</code> function like so (right before <code>super.create()</code>):</p>
<pre class="highlight"><code class="hljs actionscript">FlxG.camera.fade(FlxColor.BLACK, <span class="hljs-number">.33</span>, <span class="hljs-literal">true</span>);
</code></pre>
<p>Then, if you want to fade out (when switching states), you can do something like this:</p>
<pre class="highlight"><code class="hljs actionscript">FlxG.camera.fade(FlxColor.BLACK,<span class="hljs-number">.33</span>, <span class="hljs-literal">false</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
</span>{
    FlxG.switchState(<span class="hljs-keyword">new</span> PlayState());
});
</code></pre>
<p>Try adding this logic to all of your states and then see how much of an improvement it gives the flow of your game.</p>
<p>Next, let&#39;s give the player a little feedback whenever they get hurt in combat. We&#39;re going to make the screen shake briefly. So, go into the <code>enemyAttack()</code> function in <code>CombatHUD</code> and, right after we call <code>FlxG.camera.flash</code> (another neat little effect you can use in other projects), add:</p>
<pre class="highlight"><code class="hljs actionscript">FlxG.camera.shake(<span class="hljs-number">0.01</span>, <span class="hljs-number">0.2</span>);
</code></pre>
<p>So, each time the player gets hurt in combat, the screen will flash white, and will shake a little bit for <code>0.2</code> seconds. Try it out!</p>
<p>I know we&#39;ve used tweens a few times already, but lets add one to show the enemy getting hurt in combat. We&#39;re simply going to make a tween that moves the enemy a few pixels to the right, then triggers a second tween to move the enemy back - each one taking <code>.1</code> seconds to complete. So, in the <code>makeChoice()</code> function of <code>CombatHUD</code>, right before we play the hurt sound for the enemy, add:</p>
<pre class="highlight"><code class="hljs actionscript">FlxTween.tween(_sprEnemy, { x: _sprEnemy.x + <span class="hljs-number">4</span> }, <span class="hljs-number">.1</span>, { onComplete: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(_)</span>
</span>{
    FlxTween.tween(_sprEnemy, { x: _sprEnemy.x - <span class="hljs-number">4</span> }, <span class="hljs-number">.1</span>);
}});
</code></pre>
<p>Check out how that looks. Tweens are a very simple and powerful tool to make your game feel more active when used properly.</p>
<p>Next, let&#39;s add a background effect to our <code>CombatHUD</code> to help bring our the combat screen out from the map a little bit. We&#39;re going to copy what&#39;s on the camera&#39;s buffer, desaturate it, and then apply a <code>FlxWaveEffect</code> to give it a wavy effect. HaxeFlixel has several effects like this that can be used for a number of effects (<code>FlxGlitchEffect</code>, <code>FlxRainbowEffect</code>...).</p>
<ol>
<li><p>Open up the <code>CombatHUD</code> class and add this variable:</p>
<pre class="highlight"><code class="hljs actionscript"> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _sprScreen:FlxSprite;
</code></pre>
</li>
<li><p>In the constructor, we&#39;ll initialize these two variables (add this before we create our <code>_sprBack</code>):</p>
<pre class="highlight"><code class="hljs actionscript"> _sprScreen = <span class="hljs-keyword">new</span> FlxSprite().makeGraphic(FlxG.width, FlxG.height, FlxColor.TRANSPARENT);
 <span class="hljs-keyword">var</span> waveEffect = <span class="hljs-keyword">new</span> FlxWaveEffect(FlxWaveMode.ALL, <span class="hljs-number">4</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">4</span>);
 <span class="hljs-keyword">var</span> waveSprite = <span class="hljs-keyword">new</span> FlxEffectSprite(_sprScreen, [waveEffect]);
 add(waveSprite);
</code></pre>
<p> First, we make our <code>_sprScreen</code>, make it the size of the window, and just leave it empty for now. Then we create a <code>FlxEffectSprite</code>, tell it to target our <code>_sprScreen</code>, and set its properties. It only uses a single effect, our <code>waveEffect</code> instance (it&#39;s possible to chain multiple effects using <code>FlxEffectSprite</code>).</p>
</li>
<li><p>Next, in <code>initCombat</code> we want to make our <code>_sprScreen</code> take a copy of whatever is on the camera&#39;s buffer and apply it to itself, and then desaturate the image. Our effect sprite will always copy whatever is on our <code>_sprScreen</code> every update automatically.</p>
<pre class="highlight"><code class="hljs actionscript"> _sprScreen.drawFrame();
 <span class="hljs-keyword">var</span> screenPixels = _sprScreen.framePixels;

 <span class="hljs-keyword">if</span> (FlxG.renderBlit)
     screenPixels.copyPixels(FlxG.camera.buffer, FlxG.camera.buffer.rect, <span class="hljs-keyword">new</span> Point());
 <span class="hljs-keyword">else</span>
     screenPixels.draw(FlxG.camera.canvas, <span class="hljs-keyword">new</span> Matrix(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>));

 <span class="hljs-keyword">var</span> rc:Float = <span class="hljs-number">1</span> / <span class="hljs-number">3</span>;
 <span class="hljs-keyword">var</span> gc:Float = <span class="hljs-number">1</span> / <span class="hljs-number">2</span>;
 <span class="hljs-keyword">var</span> bc:Float = <span class="hljs-number">1</span> / <span class="hljs-number">6</span>;
 screenPixels.applyFilter(screenPixels, screenPixels.rect, <span class="hljs-keyword">new</span> Point(), <span class="hljs-keyword">new</span> ColorMatrixFilter([rc, gc, bc, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, rc, gc, bc, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, rc, gc, bc, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>]));
</code></pre>
</li>
</ol>
<p>That&#39;s all there is to it! Our effect sprite will fade in and out with the <code>CombatHUD</code> already. Try our the effect to see how it looks!</p>
<p><img src="../images/01_tutorial/0022.png" alt=""></p>
<p>You might have noticed, while testing the game, that the mouse cursor can get in the way - especially since it&#39;s not needed outside of the menu states. We can remedy this pretty easily.
In the <code>PlayState</code>&#39;s <code>create()</code>, add:</p>
<pre class="highlight"><code class="hljs actionscript">#<span class="hljs-keyword">if</span> !FLX_NO_MOUSE
FlxG.mouse.visible = <span class="hljs-literal">false</span>;
#end
</code></pre>
<p>And be sure to do the reverse (<code>= true</code>) in <code>GameOverState</code>&#39;s <code>create()</code> No more pesky mouse cursor when we don&#39;t need it!</p>
<p>There are plenty of other tweaks and tricks you can add to your games. Try playing around with the different addons special effects classes in HaxeFlixel and see what else you can come up with. Take a look at <a href="http://haxeflixel.com/demos/">the demos</a> for more examples.</p>


			<br>
			<hr>

			<ul class="pager">
				

				<li class="previous">
					<a href="/documentation/multiple-platforms">< 13 - Multiple Platforms</a>
				</li>
				


				
				<li class="next">
					<a href="/documentation/conclusion">Conclusion ></a>
				</li>
				
			</ul>


		</div>
	</div>
</div>

<footer>
	<div class="footer-main">
		<div class=" container">

			<div class="footer-social">

				<iframe width="120px" scrolling="0" height="20px" frameborder="0"
						allowtransparency="true"
						src="http://ghbtns.com/github-btn.html?user=HaxeFlixel&amp;repo=flixel&amp;type=watch&amp;count=true&amp;size=small"></iframe>

				<a href="https://twitter.com/haxeflixel" class="twitter-follow-button" data-show-count="true"
				   data-lang="en" data-size="small">Follow @haxeflixel</a>

				<a class="footer-patreon" href="https://www.patreon.com/haxeflixel" alt="Patreon" title="Support us on Patreon">
					<img src="/images/patreon-logo-small.svg" alt="Haxeflixel Patreon" title="Patreon">
				</a>

				<script>!function (d, s, id)
				{
					var js, fjs = d.getElementsByTagName (s)[0];
					if (!d.getElementById (id))
					{
						js = d.createElement (s);
						js.id = id;
						js.src = "//platform.twitter.com/widgets.js";
						fjs.parentNode.insertBefore (js, fjs);
					}
				} (document, "script", "twitter-wjs");</script>

			</div>

			<div class="footer-powered-by">
				<p>HaxeFlixel is powered by</p>
				<a href="http://haxe.org"><img src="/images/haxe.svg" alt="Haxe" title="Haxe"></a>
				+
				<a href="http://openfl.org"><img class="openfl-footer-logo" src="/images/openfl.svg" alt="OpenFL" title="OpenFL"></a>
				+
				<a href="http://flixel.org"><img class="flixel-footer-logo" src="/images/flixel.svg" alt="Flixel" title="Flixel"></a>
			</div>

		</div>
	</div>
</footer>

<script >(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-35511281-1');
ga('send', 'pageview');</script><script defer="defer"  src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script><script defer="defer"  src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script><script defer="defer"  src="/vendor/twitter-bootstrap-3/js/dropdown.js"></script><script defer="defer"  src="/vendor/twitter-bootstrap-3/js/transition.js"></script><script defer="defer"  src="/vendor/twitter-bootstrap-3/js/collapse.js"></script>

</body>

</html>
